<html>

<head>
<title>NodeBox | Grid</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, Grid, " />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/Grid" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <h3>Grid</h3><? endif ?>
<p>The NodeBox Grid library offers a number of tools to work with rows and columns in a page layout. It&#39;s like having a combination of InDesign and Excel available in NodeBox. You can use the library to generate flowing columns of text and image grids, automatically apply aesthetic proportions between cells in the grid, create spreadsheet tables with (simple) statistics, define reusable visual styles in a CSS-like way. Numerous of text commands help you for example determine good, legible column widths, apply widow/orphan control to paragraphs, generate <i>lorem ipsum</i> placeholder text. </p><p>Central concepts in this library are:</p><ul><li><b>Grid</b>: rows and columns containing cells. Each cell can be a new grid. </li><li><b>Content</b>: a text or a list of images that is divided among the rows and columns in a grid.</li><li><b>Proportion</b>: aesthetic relations between the cells in a grid.</li><li><b>Style</b>: a description of colors, typography, whitespace that can be attached to cells.</li></ul><p>The library has a caching mechanism that allows you to create multi-page documents (e.g. a book), keeping track of the text and images that have already been drawn along the way.</p><h2>Download</h2><table border="0"><tbody><tr><td><a href="https://www.nodebox.net/code/data/media/grid.zip" target="_self"><img src="http://nodebox.net/code/data/media/download.gif" alt="download" /></a></td><td><a href="https://www.nodebox.net/code/data/media/grid.zip" target="_self">grid.zip</a> (60KB)<br /><i>Last updated for NodeBox 1.9.4.2</i><br /><i>Licensed under GPL<br /></i><i>Author: Tom De Smedt</i></td></tr></tbody></table><h2>Documentation</h2><ul><li><a href="Grid.html#library" target="_self">How to get the library up and running</a></li><li><a href="Grid.html#create" target="_self">Creating a grid </a><br /></li><li><a href="Grid.html#split" target="_self">Splitting and navigating the grid</a></li><li><a href="Grid.html#add_content" target="_self">Adding content</a></li><li><a href="Grid.html#text" target="_self">Working with text</a><br /></li><li><a href="Grid.html#style" target="_self">Working with styles</a></li><li><a href="Grid.html#proportion" target="_self">Working with proportions</a></li><li><a href="Grid.html#resize" target="_self">Resizing cells</a></li><li><a href="Grid.html#statistics" target="_self">Spreadsheet statistics</a></li><li><a href="Grid.html#pages" target="_self">Multiple pages</a><br /></li></ul><p>&nbsp;</p><hr size="2" width="100%" /><h2><a name="library" title="library"></a>How to get the library up and running</h2>    <p>Put the <i>grid</i> library folder in the same folder as your script so NodeBox can find the library. You can also put it in <i>~/Library/Application Support/NodeBox/.</i></p>  <pre class="python"><span style="color: #530035;">grid</span> = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;grid&quot;</span><span style="">&#41;</span></pre></pre>        <p>&nbsp;</p><hr size="2" width="100%" /><h2><a name="create" title="create"></a>Creating a grid</h2><pre class="python">create<span style="">&#40;</span>rows=<span style="">1</span>, columns=<span style="">1</span>, width=<span style="color: #530035;">None</span>, height=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><p>The <i>create()</i> command returns a new grid object, by default encompassing the entire drawing canvas. You can define the number of rows and columns in the grid and a different width and/or height. A grid also has lots of properties and methods to make life easier. We&#39;ll briefly summarize them here and discuss them in detail later on. </p><p>The returned <i>grid</i> object has the following properties:</p><p><span class="grey_box">Navigation</span> </p><ul><li><i>grid.name</i>: the name of the grid.</li><li><i>grid.parent</i>: the grid in which this grid is a cell, <i>None</i> for the top-level grid.</li><li><i>grid.root</i>: the top-level grid, e.g. the container for all other grid cells.</li><li><i>grid.rows</i>: a list of rows in the grid. Each row is a list of contained grid cells. </li><li><i>grid.columns</i>: a list of columns in the grid. Each column is a list of contained grid cells.</li><li><i>grid.top</i>: the row or cell at the top in the grid.<br /></li><li><i>grid.bottom</i>: the row or cell at the bottom in the grid.</li><li><i>grid.left</i>: the column or cell at the utmost left in the grid.</li><li><i>grid.right</i>: the column or cell at the utmost right in grid.</li></ul><p><span class="grey_box">Position and size</span> <br /></p><ul><li><i>grid.x</i>: the horizontal offset of a cell.<br /></li><li><i>grid.y</i>: the vertical offset of a cell.<br /></li><li><i>grid.width</i>: a cell&#39;s width in pixels.<br /></li><li><i>grid.height</i>: a cell&#39;s height in pixels.<br /></li><li><i>grid.relative_width</i>: a cell&#39;s width as a number between 0.0 and 1.0, relative to other cells.</li><li><i>grid.relative_height</i>: a cell&#39;s height as a number between 0.0 and 1.0, in relative to other cells.</li><li><i>grid.fixed</i>: <i>True</i> when this cell does not harmoniously rescale to make room for other cells.<br /></li></ul><p><span class="grey_box">Content</span> <br /></p><ul><li><i>grid.content</i>: the content for the grid, divided among the rows and columns. </li><li><i>grid.content_width</i>: the actual width available for content, minus whitespace. </li><li><i>grid.content_height</i>: the actual height available for content, minus whitespace.</li><li><i>grid.flow</i>: a list of cells in the grid, defining the flow of content.</li></ul><p><span class="grey_box">Style and proportion</span> <br /></p><ul><li><i>grid.style</i>: the name of the current visual style. </li><li><i>grid.styles</i>: a dictionary of available styles. </li><li><i>grid.proportion</i>: a collection of properties defining how cells are spaced in relation to each other.</li></ul><p>Each<b> row </b>and<b> column </b>in the grid has the<b> same properties</b> available, with the exception of <i>rows</i>, <i>columns</i>, <i>proportion</i> and <i>flow</i>. This enables you to set the size, style or content for all the cells in a row or column in one go.  </p><p>The <i>grid.draw()</i> method draws the grid to the canvas, calculating text flow and applying styles.<br />The <i>grid.copy()</i> method returns a new grid object that is an exact copy of this one. <br /></p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">draw</span><span style="">&#40;</span>x=<span style="">0</span>, y=<span style="">0</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">copy</span><span style="">&#40;</span>parent=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><p>You can loop through the grid like a list of cells:</p> <pre class="python"><span style="color: #530035;">for</span> cell <span style="color: #530035;">in</span> <span style="color: #530035;">grid</span>:
    <span style="color: #530035;">print</span> cell.<span style="">name</span></pre></pre></p>&nbsp;&nbsp;&nbsp;         <p>&nbsp;</p>                         <hr size="2" width="100%" /><h2><a title="split" name="split"></a>Splitting and navigating the grid</h2><p>The grid object has a <i>grid.split()</i> method that divides the grid into rows and columns of cells. It can be supplied an optional <a href="Grid.html#proportion" target="_self">proportion</a> and <a href="Grid.html#style" target="_self">style</a> name. The <i>grid.clear()</i> method removes all cells (but it retains the grid&#39;s style, proportion and content). </p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">split</span><span style="">&#40;</span>rows, columns, proportion=<span style="color: #530035;">None</span>, style=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">clear</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p>To fully grasp the way a grid works you need to understand its recursive nature. A grid is made up of cells, arranged into rows and columns. <b>Each cell is a new grid object</b>. Take a look at the example below. We split a grid into two rows and two columns. Since the top-level cell is a grid object as well, we can use its <i>split()</i> method to subdivide the layout further.  </p><table><tbody><tr><td> <p><img src="http://nodebox.net/code/data/media/grid1.jpg" alt="grid1" /></p></td><td> <pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">2</span>, <span style="">2</span>, <span style="">150</span>, <span style="">150</span><span style="">&#41;</span>
g.<span style="">cell</span><span style="">&#40;</span><span style="">0</span>,<span style="">0</span><span style="">&#41;</span>.<span style="">split</span><span style="">&#40;</span><span style="">2</span>, <span style="">2</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="">margin</span> = <span style="">1</span>
g.<span style="">styles</span>.<span style="color: #530035;">background</span> = <span style="">&#40;</span>
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.5</span>, <span style="">0.55</span>, <span style="">0.6</span><span style="">&#41;</span>, 
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.4</span>, <span style="">0.45</span>, <span style="">0.5</span><span style="">&#41;</span>
<span style="">&#41;</span>
g.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></td></tr></tbody></table><p>&nbsp;</p><p><span class="grey_box">Navigation</span> <br /></p><p>A grid has the following methods to retrieve a row, column or single cell: </p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">row</span><span style="">&#40;</span>i<span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">column</span><span style="">&#40;</span>j<span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">cell</span><span style="">&#40;</span>i,j<span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span><span style="">&#40;</span>i,j<span style="">&#41;</span></pre></pre><p>Just as with lists the supplied indices start from zero (so the first row has index 0 and not 1). You can also use the <i>rows</i> and <i>columns</i> properties, which are both lists. </p><p>The <i>top</i>, <i>left</i>, <i>bottom</i> and <i>right</i> properties are also very useful to retrieve rows and columns at the edge of the grid. You may already have guessed that the recursive structure of a grid can go very deep, leading to unwieldy statements such as:<br /><span class="inline_code">grid.left[0].column(1).cell(2, 2)</span></p><p>Luckily, like the grid object, each row and column also has the <i>top</i>, <i>left</i>, <i>bottom</i>, <i>right</i> properties. <br />Here are some examples:</p><table><tbody><tr><td class="small_text"><img src="http://nodebox.net/code/data/media/grid2.jpg" alt="grid2" /><br /></td><td>  <pre class="python">g.<span style="">column</span><span style="">&#40;</span><span style="">0</span><span style="">&#41;</span>
g.<span style="">left</span></pre></pre></p>&nbsp;&nbsp;&nbsp;                               </td><td> <img src="http://nodebox.net/code/data/media/grid4.jpg" alt="grid4" /></td><td><pre class="python">g.<span style="">top</span>.<span style="">right</span></pre></pre></td></tr><tr><td><img src="http://nodebox.net/code/data/media/grid3.jpg" alt="grid3" /></td><td><pre class="python">g.<span style="">row</span><span style="">&#40;</span><span style="">0</span><span style="">&#41;</span>
g.<span style="">top</span></pre></pre> </td><td> <img src="http://nodebox.net/code/data/media/grid5.jpg" alt="grid5" /></td><td><pre class="python">g.<span style="">top</span>.<span style="">left</span>.<span style="">bottom</span></pre></pre></td></tr><tr><td><img src="http://nodebox.net/code/data/media/grid6.jpg" alt="grid6" /></td><td><pre class="python">g.<span style="">rows</span>.<span style="">second</span></pre></pre></td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table><p>As demonstrated in the final example, some other handy aliases are the <i>first</i>, <i>second</i>, <i>third</i>, ... <i>sixth</i> properties. They will work on a grid, a row, a column and even on a list of rows or columns.</p><p>Another good idea is to <b>label distinct sections in the grid</b>. For example, you may want to call the top part &quot;header&quot; and work with that label from there on. Each named section in the grid (cell, row, column) automatically becomes available as a property. You can also retrieve named sections with the <i>grid.find()</i> method.<br /></p><pre class="python">g.<span style="">top</span>.<span style="">name</span> = <span style="color: #ff0080;">&quot;header&quot;</span>
g.<span style="">header</span>.<span style="">style</span> = <span style="color: #ff0080;">&quot;header_style&quot;</span>
s = g.<span style="">styles</span>.<span style="">create</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;header_style&quot;</span><span style="">&#41;</span> 
s.<span style="color: #530035;">fontsize</span> = <span style="">20</span></pre></pre><pre class="python">cell = g.<span style="">find</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;header&quot;</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;                           <p><span class="grey_box">Highlight helper</span> </p><p>The Grid library has a <i>highlight()</i> command that can help you out navigating to the structure of a grid. You call it after drawing the grid to the canvas. It will overlay the grid with indicators marking all the cells. When the optional <i>recursive</i> parameter is <i>True</i>, it will keep highlighting cells in cells, and so on.<br /></p><pre class="python">highlight<span style="">&#40;</span><span style="color: #530035;">grid</span>, clr=<span style="color: #530035;">None</span>, recursive=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><p><img src="http://nodebox.net/code/data/media/grid8.jpg" alt="grid8" /> <br /></p><p>As you can see in the above example, you supply a grid object (or a column or row) to the command and it will indicate the suffix you need to add in your code to reference a particular cell in it. </p><p>&nbsp;</p> <hr size="2" width="100%" /><h2><a title="add_content" name="add_content"></a>Adding content</h2><p>You can fill a grid with text, images or your own drawing command. Simply assign it to the <i>grid.content</i> property. The content automatically gets distributed among the grid&#39;s rows and columns, following a &quot;depletion&quot;-approach: cells are filled until there is no content left. The <i>grid.flow</i> list determines which cells get content first (column-first by default). </p><pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">1</span>, <span style="">3</span>, width=<span style="">550</span>, height=<span style="">200</span><span style="">&#41;</span>
g.<span style="">content</span> = <span style="color: #530035;">open</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;alice.txt&quot;</span><span style="">&#41;</span>.<span style="">read</span><span style="">&#40;</span><span style="">&#41;</span> <span style="color: grey;"># text from a file</span>
g.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p><img src="http://nodebox.net/code/data/media/grid7.jpg" alt="grid7" /> <br /></p><p>The following types of content can be added to the grid:</p><ul><li><b>text</b>: a <a href="Strings.html" target="_self">string</a> of text <br /></li><li><b>image</b>: a single image filename or a <a href="Lists.html" target="_self">list</a> of image filenames</li><li><b>command</b>: a custom drawing <a href="Commands.html" target="_self">command</a></li><li><b>number</b></li></ul><p>After you set the content, the following properties become available: </p><ul><li><i>grid.content.widows</i>: how many stray lines at the end to move to the next cell (1 by default)<br /></li><li><i>grid.content.orphans</i>: how many stray lines at the start to move the previous cell (1 by default)<br /></li><li><i>grid.content.repeat</i>: when <i>True</i>,  cycle through the list of images until all cells are filled.</li><li><i>grid.content.remainder</i>: the excess content that wasn&#39;t drawn.<br /></li></ul><br /><p>Some methods you can use to retrieve content:</p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">content</span>.<span style="">is_text</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">content</span>.<span style="">is_number</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">content</span>.<span style="">is_image</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">content</span>.<span style="">is_command</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="">str</span><span style="">&#40;</span><span style="color: #530035;">grid</span>.<span style="">content</span><span style="">&#41;</span>   <span style="color: grey;"># retrieve the text content</span></pre></pre><pre class="python"><span style="">int</span><span style="">&#40;</span><span style="color: #530035;">grid</span>.<span style="">content</span><span style="">&#41;</span>   <span style="color: grey;"># retrieve numeric content</span></pre></pre><pre class="python"><span style="">float</span><span style="">&#40;</span><span style="color: #530035;">grid</span>.<span style="">content</span><span style="">&#41;</span> <span style="color: grey;"># retrieve numeric content</span></pre></pre><pre class="python"><span style="">list</span><span style="">&#40;</span><span style="color: #530035;">grid</span>.<span style="">content</span><span style="">&#41;</span>  <span style="color: grey;"># retrieve the list of images</span></pre></pre><p>Again, keep in mind that since each cell in a grid row or column is itself a grid object, you can add content (titles, subtitles, images, ...) to any individual cell.</p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">has_content</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p> The <i>grid.has_content()</i> returns <i>True</i> if a cell has content, <i>False</i> if it is simply inheriting content from a parent grid. </p><p>&nbsp;</p>        <p><span class="grey_box">Flowing content</span> <br /></p><p>When a grid is drawn, the content is distributed among its rows and columns. For text content, this means that a piece is cut off from the start of the text so that it matches the size of the current cell (taking into account whitespace, font size and alignment). The remainder of the text is then passed on to the next cell in the flow. Content can flow vertically from top to bottom (column-first), horizontally from left to right (row-first) or in your own custom way.</p><p>The grid object has two methods for setting the flow:</p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">flow_vertical</span><span style="">&#40;</span>recursive=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">flow_horizontal</span><span style="">&#40;</span>recursive=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>Additionally, any cells in a grid you add to the <i>grid.flow</i> list will get content first.</p><p>&nbsp;</p><p><span class="grey_box">Fitting content</span> <br /></p><p>In some situations you don&#39;t want content to flow from cell to cell, you want it to <b>match the size of this cell</b> as best as possible. This is especially true for grids containing images and titles. We may want the image in a cell to stretch so it fits the cell comfortably, avoiding gaps. We may want the title to take up all the available space so we can then resize and experiment with the grid without having to worry about fontsize anymore.</p><p>To accomplish this we give the cell a <a href="Grid.html#style" target="_self">style</a> which has its <i>style.fit</i> property set to <i>True</i>: </p><table><tbody><tr><td><p><img src="http://nodebox.net/code/data/media/grid9.jpg" alt="grid9" /></p></td><td><pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">1</span>, <span style="">1</span>, <span style="">250</span>, <span style="">90</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="">default</span>.<span style="">fit</span> = <span style="color: #530035;">True</span>
g.<span style="">styles</span>.<span style="">default</span>.<span style="color: #530035;">align</span> = <span style="color: #ff0080;">&quot;center&quot;</span>
g.<span style="">content</span> = <span style="color: #ff0080;">&quot;heading&quot;</span>
g.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></td></tr><tr><td><p><img src="http://nodebox.net/code/data/media/grid10.jpg" alt="grid10" /></p></td><td><pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">2</span>, <span style="">2</span>, <span style="">250</span>, <span style="">250</span><span style="">&#41;</span>
g.<span style="">top</span>.<span style="">left</span>.<span style="">split</span><span style="">&#40;</span><span style="">2</span>, <span style="">2</span><span style="">&#41;</span>
g.<span style="">top</span>.<span style="">left</span>.<span style="">bottom</span>.<span style="">right</span>.<span style="">split</span><span style="">&#40;</span><span style="">2</span>, <span style="">2</span><span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># fetch images from Morguefile.com</span>
web = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;web&quot;</span><span style="">&#41;</span>
img = web.<span style="">morguefile</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;ocean&quot;</span><span style="">&#41;</span><span style="">&#91;</span>:<span style="">5</span><span style="">&#93;</span>
img = <span style="">&#91;</span>x.<span style="">download</span><span style="">&#40;</span><span style="">&#41;</span> <span style="color: #530035;">for</span> x <span style="color: #530035;">in</span> img<span style="">&#93;</span>
g.<span style="">content</span> = images
g.<span style="">content</span>.<span style="">repeat</span> = <span style="color: #530035;">True</span>
&nbsp;
g.<span style="">styles</span>.<span style="">margin</span> = <span style="">1</span>
g.<span style="">styles</span>.<span style="">fit</span> = <span style="color: #530035;">True</span>
g.<span style="">styles</span>.<span style="color: #530035;">align</span> = <span style="color: #ff0080;">&quot;center&quot;</span>, <span style="color: #ff0080;">&quot;bottom&quot;</span></pre></pre></td></tr></tbody></table><p>&nbsp;</p><p><span class="grey_box">Custom content</span> </p><p>Instead of adding text or images to the grid, you can also add a custom command as content. This is great if you want to showcase different versions of generative artwork, add embellishments to the layout or document code, for example. The custom command takes the following form:</p><pre class="python">custom_content<span style="">&#40;</span>x, y, width, height, style=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><p>It receives the grid&#39;s position, size and style as input parameters.</p><table><tbody><tr><td><p><img src="http://nodebox.net/code/data/media/grid11.jpg" alt="grid11" /></p></td><td><pre class="python"><span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>ovals</span><span style="">&#40;</span>x, y, w, h, style=<span style="color: #530035;">None</span><span style="">&#41;</span>:
    <span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">20</span><span style="">&#41;</span>:
        r = <span style="color: #530035;">random</span><span style="">&#40;</span><span style="">5</span>, <span style="">40</span><span style="">&#41;</span>
        <span style="color: #530035;">stroke</span><span style="">&#40;</span><span style="">0.1</span>, <span style="">0.4</span><span style="">&#41;</span>
        <span style="color: #530035;">strokewidth</span><span style="">&#40;</span><span style="">0.5</span><span style="">&#41;</span>
        <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span><span style="">&#41;</span>, <span style="">0.1</span>, <span style="">0.2</span>, <span style="">0.4</span><span style="">&#41;</span>  
        <span style="color: #530035;">oval</span><span style="">&#40;</span>
            x + <span style="color: #530035;">random</span><span style="">&#40;</span>w<span style="">&#41;</span>  - r,
            y + <span style="color: #530035;">random</span><span style="">&#40;</span>h<span style="">&#41;</span> - r,
            r*<span style="">2</span>, r*<span style="">2</span>
        <span style="">&#41;</span>
g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">2</span>, <span style="">2</span>, <span style="">250</span>, <span style="">250</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="">margin</span> = <span style="">2</span>
g.<span style="">styles</span>.<span style="color: #530035;">stroke</span> = <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.2</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="color: #530035;">strokewidth</span> = <span style="">0.5</span>
g.<span style="">content</span> = ovals <span style="color: grey;"># custom content!</span>
g.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></td></tr></tbody></table><p>&nbsp;</p><hr size="2" width="100%" /><h2><a title="text" name="text"></a>Working with text</h2><p>At the heart of the Grid library is the text module. It contains many useful commands for working with paragraphs of text, even outside the Grid library. These commands are likely to be in constant development.<br /></p><pre class="python"><span style="color: #530035;">text</span>.<span style="">split</span><span style="">&#40;</span>txt, width, height, widows=<span style="">1</span>, orphans=<span style="">1</span>, forward=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">text</span>.<span style="">divide</span><span style="">&#40;</span>txt, width, height, widows=<span style="">1</span>, orphans=<span style="">1</span>, forward=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>The <i>text.split()</i> command returns a (<i>block</i>, <i>remainder</i>) tuple in which <i>block</i> is the first portion of the given <i>txt</i> string that will fit inside a box of the given <i>width</i> and <i>height</i>. The <i>text.divide()</i> command works in the same way, except it returns a list of strings that all fit inside a box of the given size. </p><p>The three optional parameters are concerned with <b>widow/orphan control</b>. Widows and orphans are stray lines at the beginning or end of a block of text. We try to avoid these for aesthetic purposes. The <i>widows</i> parameter is the threshold for stray lines at the end to cut off, <i>orphans</i> for stray lines at the start. If <i>forward</i> is <i>True</i>, orphans will never be moved back to the previous block. Instead, more text is cut off from the end of the previous block and moved forward.</p><p>Note that widow/orphan control won&#39;t work with lists (i.e. single lines of text separated by a carriage return), so then you&#39;ll need to turn it off. </p><pre class="python"><span style="color: #530035;">text</span>.<span style="">legible_width</span><span style="">&#40;</span>txt, chars=<span style="">70</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">text</span>.<span style="">fit_fontsize</span><span style="">&#40;</span><span style="">str</span>, width, height<span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">text</span>.<span style="">fit_lineheight</span><span style="">&#40;</span><span style="">str</span>, width, height<span style="">&#41;</span></pre></pre><p>The <i>text.legible_width()</i> command returns a <b>good column width</b> for the given <i>txt</i> set in the current font. Here we follow the rule of thumb in graphic design that 70 characters per line at fontsize 10pt is optimal. When the fontsize becomes smaller, you&#39;ll likely need smaller columns to keep the reader&#39;s attention. Smaller lineheight furthermore decreases the column width.</p><p>The <i>text.fit_fontsize()</i> command returns a good fontsize so that the given <i>str</i> fits a box of the given <i>width</i> and <i>height</i>. In the same way, <i>text.fit_lineheight()</i> returns a good line spacing for the text to fit the box vertically. </p><p>&nbsp;</p><p><span class="grey_box">Placeholder text</span> </p><p>If you don&#39;t have any text lying around, you can generate paragraphs of <a href="http://en.wikipedia.org/wiki/Lorem_ipsum" target="_self">lorem ipsum</a> placeholder text right from the text module. Each command below returns a string of text containing words of different length, yielding a good visual representation of a real text will look like: </p><pre class="python"><span style="color: #530035;">text</span>.<span style="">placeholder</span><span style="">&#40;</span>n=<span style="">10</span><span style="">&#41;</span>                        <span style="color: grey;"># a text with n paragraphs</span></pre></pre><pre class="python"><span style="color: #530035;">text</span>.<span style="">placeholder</span>.<span style="">paragraph</span><span style="">&#40;</span>n=<span style="">10</span>, first=<span style="color: #530035;">False</span><span style="">&#41;</span> <span style="color: grey;"># a paragraph with n lines</span></pre></pre><pre class="python"><span style="color: #530035;">text</span>.<span style="">placeholder</span>.<span style="">sentence</span><span style="">&#40;</span>n=<span style="">6</span><span style="">&#41;</span>                <span style="color: grey;"># a line of n words</span></pre></pre><pre class="python"><span style="color: #530035;">print</span> <span style="color: #530035;">grid</span>.<span style="color: #530035;">text</span>.<span style="">placeholder</span>.<span style="">sentence</span><span style="">&#40;</span><span style="">&#41;</span> 
&gt;&gt;&gt; Consectetur dolore sunt nisi, amet deserunt.</pre></pre><p>The text.placeholder.english() command generates readable text  from the <a href="Reference_|_autotext().html" target="_self">Kant Generator</a>:<br /></p><pre class="python"><span style="color: #530035;">text</span>.<span style="">placeholder</span>.<span style="">english</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p><br /><span class="grey_box">Symbols</span> <br /></p><p>To create superscript numbers for footnotes, you can use the <i>text.superscript()</i> command. The text module also contains a small set of symbols that may be of use.</p><pre class="python"><span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;footnote&quot;</span> + <span style="color: #530035;">grid</span>.<span style="color: #530035;">text</span>.<span style="">superscript</span><span style="">&#40;</span><span style="">1</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;we &quot;</span> + <span style="color: #530035;">grid</span>.<span style="color: #530035;">text</span>.<span style="">heart</span> + <span style="color: #ff0080;">&quot; you&quot;</span>
&gt;&gt;&gt; we ‚ù§ you</pre></pre><ul><li><b>Arrows</b>:  <i>arrow1, arrow2</i></li><li><b>Bullets</b>: <i>bullet, heart, check, cross</i></li><li><b>Info</b>: <i>telephone, mail</i></li><li><b>Emotion</b>: <i>happy, sad</i></li><li><b>Currency</b>: <i>euro, pound, yen</i></li><li><b>Legal</b>: <i>copyright, trademark, registered</i></li><li><b>Danger</b>: <i>warning, toxic, radiation, biohazard, recycling</i></li></ul><p>&nbsp;</p><hr size="2" width="100%" /><h2><a title="style" name="style"></a>Working with styles</h2><p>The Grid library uses the same styling mechanism as the <a href="Graph.html" target="_self">Graph</a> library, so if you are already familiar with that library you will find many similarities here. Essentially, you can customize the look and feel of the grid down to the bottom. The <i>grid.styles</i> dictionary contains different <b>styles</b>, each with a name and some color, font and whitespace properties.  Each grid (or cell) has a <i>style</i> property which you can assign <b>the name of a style</b>. You can easily modify existing styles and create new ones.</p><p>The <i>styles</i> dictionary has one predefined style:</p><pre class="python"><span style="color: #530035;">print</span> <span style="color: #530035;">grid</span>.<span style="">styles</span>.<span style="">keys</span><span style="">&#40;</span><span style="">&#41;</span>
&gt;&gt;&gt; <span style="">&#91;</span><span style="color: #ff0080;">'default'</span><span style="">&#93;</span></pre></pre><p>You can change the properties of each of the individual style objects:</p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">styles</span>.<span style="">default</span>.<span style="color: #530035;">fontsize</span> = <span style="">10</span></pre></pre><p>Or set a property on all styles:</p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">styles</span>.<span style="">margin</span> = <span style="">5</span></pre></pre><p>Here&#39;s an example of how to add your own custom style. Note the optional <i>template</i> parameter: we are creating a new style based on a copy of the default style: </p><pre class="python">s = <span style="color: #530035;">grid</span>.<span style="">styles</span>.<span style="">create</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;header&quot;</span>, template=<span style="color: #ff0080;">&quot;default&quot;</span><span style="">&#41;</span>
s.<span style="color: #530035;">background</span> = <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;                   <p><span class="grey_box">Style properties</span> <br /></p><p>A <i>style</i> object has the following properties: <br /></p><ul><li><i>style.background</i>: cell background <a href="http://nodebox.net/code/index.php/Reference_%7C_color%28%29" target="_self">color</a>.</li><li><i>style.fill</i>: fill color for cell text. </li><li><i>style.stroke</i>: stroke color for the cell border. </li><li><i>style.strokewidth</i>: width of the cell border.</li><li><i>style.roundness</i>: corner roundness of the cell border (0.0 to 1.0)<br /></li><li><i>style.font</i>: font used for cell text.</li><li><i>style.fontsize</i>: fontsize for text.</li><li><i>style.lineheight</i>: lineheight for paragraph text.<br /></li><li><i>style.align</i>: horizontal and vertical alignment for text and images.</li><li><i>style.rotation</i>: flip the content by 90, -90 or 180 degrees (0 by default). </li><li><i>style.margin</i>: whitespace surrounding the cell.<br /></li><li><i>style.padding</i>: whitespace inside the cell.<br /></li><li><i>style.clipped</i>: when <i>True</i> (default), content that overflows the cell boundaries is clipped.</li><li><i>style.fit</i>: when <i>True</i>, scale the content to fit the cell.<br /></li><li><i>style.delegate</i>: when <i>True</i> (default), distribute style properties to child cells.<br /></li></ul><p>&nbsp;</p><p><span class="grey_box">Background</span> <br /></p><p>The background of a cell can be a <b>fill color</b>, an <b>image</b>, or a <b>gradient</b>. You can assign it a single color, a tuple of two colors for a gradient or an image filename. If you want to draw a gradient you&#39;ll need to have the <a href="Colors.html" target="_self">Colors</a> library installed.</p><p>For more complex gradients, use the following method:</p><pre class="python">style.<span style="color: #530035;">background</span>.<span style="">gradientfill</span><span style="">&#40;</span><span style="">self</span>, clr1, clr2, <span style="">type</span>=<span style="color: #ff0080;">&quot;radial&quot;</span>, 
                              dx=<span style="">0</span>, dy=<span style="">0</span>, spread=<span style="">1.0</span>, angle=<span style="">0</span>, alpha=<span style="">1.0</span><span style="">&#41;</span></pre></pre><p>The <i>style.background</i> also has some properties to define how background images are attached:</p><ul><li><i>style.background.align</i>: see below.<br /></li><li><i>style.background.scale</i>: scale factor for the background image (1.0 by default).<br /></li><li><i>style.background.x</i>: horizontal offset. </li><li><i>style.background.y</i>: vertical offset.<br /></li><li><i>style.background.opacity</i>: alpha transparency (1.0 by default).<br /></li></ul><p>&nbsp;</p><p><span class="grey_box">Alignment</span>  </p><p>The <i>style.align</i> property determines how content in a cell is arranged. </p><ul><li>For text, applicable values are LEFT, CENTER, RIGHT and JUSTIFY. <br /></li><li>For images, you can supply either a single value or a (horizontal, vertical) tuple. <br />Additional values here are &quot;top&quot; and &quot;bottom&quot;. </li></ul><p>&nbsp;</p><p><span class="grey_box">Whitespace</span> <br /></p><p>The style has <b>margin, padding </b>and<b> stroke </b>properties to define whitespace and cell border. Each of these can be assigned a single number, or a (<i>left</i>, <i>top,</i> <i>right</i>, <i>bottom</i>)-tuple of values. You can also set the individual spacing with properties:</p><ul><li><i>style.margin.left</i>: left margin width (or padding/stroke). <br /></li><li><i>style.margin.top</i>: top margin height (or padding/stroke).  </li><li><i>style.margin.right</i>: right margin width (or padding/stroke). </li><li><i>style.margin.bottom</i>: bottom margin height (or padding/stroke).  </li></ul><p>&nbsp;</p><table><tbody><tr><td><p><img src="http://nodebox.net/code/data/media/grid13.jpg" alt="grid13" /></p></td><td><p><b>Cell box model </b></p><p>This illustration shows how a cell&#39;s whitespace is organized. Assume that the blue box is a cell. It&#39;s total size is defined by <i>cell.width</i> and <i>cell.height</i>. </p><p>Margin space goes around the cell border. <br />The border goes around the cell padding. </p><p>The inner rectangle defines the space available to draw text and images (<i>cell.content_width</i> and <i>cell.content_height</i>). </p></td></tr></tbody></table><p>&nbsp;</p><p><span class="grey_box">Style delegation</span> <br /></p><p>When you set the style for a grid, all of the cells in the grid will inherit the same style. We say that this grid is an invisible <b>container</b>, and instead of appyling styling to itself, it <b>delegates</b> the styling to all of its children. </p><p>This works intuitively in most cases. Take a look at the example below. I&#39;ve created a default style, and a style for the header. All the cells in the header assume the same &quot;header&quot; style.</p><p><img src="http://nodebox.net/code/data/media/grid12.jpg" alt="grid12" /></p><pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">3</span>, <span style="">1</span>, <span style="color: #530035;">WIDTH</span>, <span style="color: #530035;">HEIGHT</span><span style="">&#41;</span>
&nbsp;
g.<span style="">top</span>.<span style="">name</span> = <span style="color: #ff0080;">&quot;header&quot;</span>
g.<span style="">header</span>.<span style="">split</span><span style="">&#40;</span><span style="">1</span>, <span style="">5</span><span style="">&#41;</span>
g.<span style="">header</span>.<span style="">height</span> = <span style="">40</span>
g.<span style="">header</span>.<span style="">style</span> = <span style="color: #ff0080;">&quot;header&quot;</span>
&nbsp;
g.<span style="">styles</span>.<span style="">default</span>.<span style="">margin</span> = <span style="">1</span>
g.<span style="">styles</span>.<span style="">default</span>.<span style="color: #530035;">background</span> = <span style="">&#40;</span>
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.5</span>, <span style="">0.55</span>, <span style="">0.6</span><span style="">&#41;</span>, 
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.4</span>, <span style="">0.45</span>, <span style="">0.5</span><span style="">&#41;</span>
<span style="">&#41;</span>
&nbsp;
s = g.<span style="">styles</span>.<span style="">create</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;header&quot;</span>, template=<span style="color: #ff0080;">&quot;default&quot;</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="">header</span>.<span style="color: #530035;">background</span> = <span style="">&#40;</span>
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.45</span>, <span style="">0.5</span>, <span style="">0.6</span><span style="">&#41;</span>, 
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.35</span>, <span style="">0.4</span>, <span style="">0.5</span><span style="">&#41;</span>
<span style="">&#41;</span>
&nbsp;
g.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p>In some case however, style delegation works counter-intuitively. Suppose you wanted to define one background image for the entire header. You would set the header style&#39;s <i>background</i> property to an image, which would then be delegated to all the cells in the header. Result: each cell gets its own copy of the image.</p><p>To counter this, set <i>style.delegate</i> to <i>False</i>. The image (or color or border) is then applied only to the container. You&#39;ll now have to create a second style for all the individual cells in the container though.</p> <pre class="python"><span style="color: #530035;">grid</span>.<span style="">has_style</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p>The <i>grid.has_style()</i> returns <i>True</i> if a cell has a style set, <i>False</i> if it is simply inheriting a style from a parent grid. </p><p>&nbsp;</p> <hr size="2" width="100%" /><h2><a title="proportion" name="proportion"></a>Working with proportions</h2><p>Proportion is the <b>relationship in terms of size</b> between rows and columns. The library offers a set of automated proportions to quickly create nice-looking layouts: </p><ul><li><b>even</b>: (default) all columns are evenly wide, all rows evenly high.</li><li><b>fib</b>: rows and columns are proportioned according to the <b>golden ratio</b> (1.618). <br /></li><li><b>random</b>: rows and columns are randomly proportioned (mainly useful for experimenting).</li><li><b>contrast</b>: a few wide columns, many narrow columns (mainly useful for experimenting). </li></ul><p>A golden ratio means that if the width of one column would be 1, the width of the next column would approximate 1.618. The distribution between the two columns is roughly 3/8 and 5/8. Throughout history, artists and architects have believed this proportion to be visually pleasing.</p><p>The golden ratio can also be found in various natural arrangements (such as shells and  branches). A mathematical solution to generate a sequence of numbers with a golden proportion is the Fibonacci algorithm:<span class="inline_code"> fib(n) = fib(n-1) + fib(n-2)</span> with<span class="inline_code"> fib(0)=0</span> and <span class="inline_code">fib(1)=1</span><span class="inline_code"></span><br /><span class="inline_code"><br /></span></p><table><tbody><tr><td><img src="http://nodebox.net/code/data/media/grid14.jpg" alt="grid14" /></td><td>The easiest way set a grid proportion:<pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">3</span>, <span style="">1</span>, width=<span style="">125</span>, height=<span style="">125</span><span style="">&#41;</span>
g.<span style="">proportion</span> = <span style="color: #ff0080;">&quot;fib&quot;</span></pre></pre></td></tr><tr><td><img src="http://nodebox.net/code/data/media/grid15.jpg" alt="grid15" /> <br /></td><td>You can also supply a (<i>horizontal</i>, <i>vertical</i>) tuple. In this example we use a golden proportion for the rows, and an even proportion for the columns:<pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">3</span>, <span style="">2</span>, width=<span style="">125</span>, height=<span style="">125</span><span style="">&#41;</span>
g.<span style="">proportion</span> = <span style="color: #ff0080;">&quot;even, &quot;</span>fib<span style="color: #ff0080;">&quot;</span></pre></pre> </td></tr></tbody></table><p>&nbsp;</p><p><span class="grey_box">Custom proportions</span> </p><p>When you need something more elaborate (but not that elaborate that you&#39;re going to define the width and height for each row and column yourself) you can work with the custom <i>proportion()</i> command: </p><pre class="python">proportion<span style="">&#40;</span>distribution=<span style="color: #ff0080;">&quot;even&quot;</span>, 
           <span style="">sorted</span>=<span style="color: #530035;">False</span>, <span style="">reversed</span>=<span style="color: #530035;">False</span>, shuffled=<span style="color: #530035;">False</span>, mirrored=<span style="color: #530035;">False</span>, 
           repetition=<span style="">1</span>, n=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><p>The command will return something you can assign to the <i>grid.proportion</i> property (or two of them in a tuple). When <i>sorted</i> is <i>True</i>, the sequence will be ordered from small to large (vice versa if <i>reversed</i> is <i>True</i>). When <i>mirrored</i> is <i>True</i>, small values in the sequence will be grouped in the middle surrounded by the larger ones. The <i>repetition</i> parameter defines how many times to repeat the pattern.</p><p>For example:</p><pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">1</span>, <span style="">7</span>, width=<span style="">550</span>, height=<span style="">150</span><span style="">&#41;</span>
g.<span style="">proportion</span> = <span style="color: #530035;">grid</span>.<span style="">proportion</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;fib&quot;</span>, mirrored=<span style="color: #530035;">True</span>, repetition=<span style="">2</span><span style="">&#41;</span> 
g.<span style="">styles</span>.<span style="">default</span>.<span style="">margin</span> = <span style="">1</span>
g.<span style="">styles</span>.<span style="">default</span>.<span style="color: #530035;">background</span>.<span style="">gradientfill</span><span style="">&#40;</span>
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.5</span>, <span style="">0.55</span>, <span style="">0.6</span><span style="">&#41;</span>, 
    <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.4</span>, <span style="">0.45</span>, <span style="">0.5</span><span style="">&#41;</span>,
    <span style="">type</span>=<span style="color: #ff0080;">&quot;linear&quot;</span>,
    spread=<span style="">int</span><span style="">&#40;</span>g.<span style="">height</span><span style="">&#41;</span>
<span style="">&#41;</span>
g.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p><img src="http://nodebox.net/code/data/media/grid16.jpg" alt="grid16" /> <br /></p><p>&nbsp;</p><hr size="2" width="100%" /><h2><a title="resize" name="resize"></a>Resizing cells</h2><p>You can resize cells, rows and columns either by an <b>absolute</b> value or by a <b>relative</b> value between 0.0 and 1.0. For example: the total relative width of all the columns in a grid is 1.0 (or 100%). If there are four even columns in the grid each column&#39;s relative width is 0.25 (25%). <br /></p><pre class="python"><span style="color: #530035;">grid</span>.<span style="color: #530035;">size</span><span style="">&#40;</span>width, height, fixed=<span style="color: #530035;">False</span>, relative=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><p>The following properties can also be used to resize a cell, column or row: </p><ul><li><i>grid.width</i>: a cell&#39;s width in pixels.<br /></li><li><i>grid.height</i>: a cell&#39;s height in pixels.<br /></li><li><i>grid.relative_width</i>: a cell&#39;s width as a number between 0.0 and 1.0, relative to other cells.</li><li><i>grid.relative_height</i>: a cell&#39;s height as a number between 0.0 and 1.0, in relative to other cells.</li><li><i>grid.fixed</i>: <i>True</i> when this cell does not automatically rescale to make room for other cells.</li></ul><p>For example:</p><pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">2</span>, <span style="">2</span>, <span style="color: #530035;">WIDTH</span>, <span style="color: #530035;">HEIGHT</span><span style="">&#41;</span>
g.<span style="">top</span>.<span style="">relative_height</span> += <span style="">0.25</span></pre></pre><p>When you resize a cell in a grid, the other cells in the same row or column will contract or expand evenly to make room. The grid&#39;s proportion will be respected as best as possible in the course.<a href="javascript:pop(&#39;../data/media/grid17.mov&#39;,&#39;grid&#39;,&#39;width=687,height=405&#39;)"><br />View demo</a> <br /></p><p>However, if a cell has its <i>fixed</i> property set to <i>True</i>, it will always retain the size you give it.</p><p>&nbsp;</p><hr size="2" width="100%" /><h2><a title="statistics" name="statistics"></a>Spreadsheet statistics</h2><p>Each grid, row and column has a number of properties for doing simple statistics on numerical cells: <br /> </p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">count</span>    <span style="color: grey;"># the number of cells</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">used</span>     <span style="color: grey;"># the number of cells that have content</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">empty</span>    <span style="color: grey;"># the number of empty cells</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">numeric</span>  <span style="color: grey;"># the number of numeric cells in the grid</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">numbers</span>  <span style="color: grey;"># list of numerical values</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">sum</span>      <span style="color: grey;"># sum of all numerical values</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">avg</span>      <span style="color: grey;"># average</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">min</span>      <span style="color: grey;"># lowest number in the set</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">max</span>      <span style="color: grey;"># highest number in the set</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">variance</span> <span style="color: grey;"># how spread out is the distribution?</span></pre></pre><pre class="python"><span style="color: #530035;">grid</span>.<span style="">stdev</span>    <span style="color: grey;"># standard deviation</span></pre></pre><p>This allows you to quickly calculate the content of cells based on the numbers in other cells. The advantage is that you can create a spreadsheet template once, and then reuse it with other data or other visual cells.</p><p><img src="http://nodebox.net/code/data/media/grid18.jpg" alt="grid18" /></p><pre class="python">downloads = <span style="">&#123;</span>
    <span style="color: #ff0080;">&quot;2007&quot;</span>: <span style="">&#91;</span><span style="">622</span>, <span style="">3384</span>, <span style="">3856</span>, <span style="">2024</span>, <span style="">2027</span>, <span style="">1593</span>, 
             <span style="">1352</span>, <span style="">1326</span>, <span style="">1309</span>, <span style="">4822</span>, <span style="">2988</span>, <span style="">1536</span><span style="">&#93;</span>,
    <span style="color: #ff0080;">&quot;2008&quot;</span>: <span style="">&#91;</span><span style="">961</span>, <span style="">5207</span>, <span style="">10980</span>, <span style="">7221</span>, <span style="">7797</span>, <span style="">1975</span><span style="">&#93;</span>
<span style="">&#125;</span>
&nbsp;
g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">len</span><span style="">&#40;</span>downloads<span style="">&#41;</span><span style="">+1</span>, <span style="">12</span><span style="">+2</span>, width=<span style="">550</span>, height=<span style="">60</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="color: #530035;">font</span> = <span style="color: #ff0080;">&quot;Helvetica&quot;</span>
g.<span style="">styles</span>.<span style="color: #530035;">background</span> = <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.5</span>, <span style="">0.65</span>, <span style="">0.8</span>, <span style="">0.25</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="color: #530035;">fill</span> = <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.4</span><span style="">&#41;</span>
g.<span style="">styles</span>.<span style="">margin</span> = <span style="">1</span>
g.<span style="">styles</span>.<span style="">padding</span> = <span style="">&#40;</span><span style="">4</span>, <span style="">2</span>, <span style="">0</span>, <span style="">0</span><span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># Table header.</span>
months = <span style="">&#91;</span><span style="color: #ff0080;">&quot;jan&quot;</span>, <span style="color: #ff0080;">&quot;feb&quot;</span>, <span style="color: #ff0080;">&quot;mar&quot;</span>, <span style="color: #ff0080;">&quot;apr&quot;</span>, <span style="color: #ff0080;">&quot;may&quot;</span>, <span style="color: #ff0080;">&quot;jun&quot;</span>, 
          <span style="color: #ff0080;">&quot;jul&quot;</span>, <span style="color: #ff0080;">&quot;aug&quot;</span>, <span style="color: #ff0080;">&quot;sep&quot;</span>, <span style="color: #ff0080;">&quot;oct&quot;</span>, <span style="color: #ff0080;">&quot;nov&quot;</span>, <span style="color: #ff0080;">&quot;dec&quot;</span><span style="">&#93;</span>
s = g.<span style="">styles</span>.<span style="">create</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;header&quot;</span><span style="">&#41;</span>
s.<span style="color: #530035;">font</span> = <span style="color: #ff0080;">&quot;Georgia-Bold&quot;</span>
g.<span style="">top</span>.<span style="">style</span> = s.<span style="">name</span>
g.<span style="">top</span><span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>.<span style="">content</span> = <span style="color: #ff0080;">&quot;downloads&quot;</span>
<span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">12</span><span style="">&#41;</span>:
    g.<span style="">top</span><span style="">&#91;</span>i<span style="">+1</span><span style="">&#93;</span>.<span style="">content</span> = months<span style="">&#91;</span>i<span style="">&#93;</span>
&nbsp;
<span style="color: grey;"># Each year is a row.</span>
<span style="color: grey;"># The leftmost column displays the current year.</span>
<span style="color: grey;"># The rightmost column displays the total per year.</span>
<span style="color: #530035;">for</span> i, year <span style="color: #530035;">in</span> <span style="">enumerate</span><span style="">&#40;</span>downloads<span style="">&#41;</span>:
    row = g.<span style="">rows</span><span style="">&#91;</span>i<span style="">+1</span><span style="">&#93;</span>
    row.<span style="">left</span>.<span style="">content</span> = year
    <span style="color: #530035;">for</span> j, monthly <span style="color: #530035;">in</span> <span style="">enumerate</span><span style="">&#40;</span>downloads<span style="">&#91;</span>year<span style="">&#93;</span><span style="">&#41;</span>:
        row<span style="">&#91;</span>j<span style="">+1</span><span style="">&#93;</span>.<span style="">content</span> = monthly
    row.<span style="">right</span>.<span style="">content</span> = row<span style="">&#91;</span><span style="">1</span>:<span style="">-1</span><span style="">&#93;</span>.<span style="">sum</span>
&nbsp;
g.<span style="">left</span>.<span style="">relative_width</span> = <span style="">0.15</span>
g.<span style="">right</span>.<span style="">relative_width</span> = <span style="">0.1</span>
g.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span> 
&nbsp;
g.<span style="">column</span><span style="">&#40;</span><span style="">1</span><span style="">&#41;</span>.<span style="">name</span> = <span style="color: #ff0080;">&quot;jan&quot;</span>
<span style="color: #530035;">print</span> g.<span style="">jan</span>.<span style="">avg</span></pre></pre></p>&nbsp;&nbsp;&nbsp;     <p>&nbsp;</p><hr size="2" width="100%" /><h2><a title="pages" name="pages"></a>Multiple pages</h2><p>The library has two commands to <b>store a grid in memory and reload it</b>:  </p><pre class="python"><span style="color: #530035;">grid</span>.<span style="">save</span><span style="">&#40;</span>grid_object<span style="">&#41;</span></pre></pre><pre class="python">g = <span style="color: #530035;">grid</span>.<span style="">load</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p>This is especially useful because the <i>grid.content.remainder</i> property will contain any content that hasn&#39;t been drawn - and therefore should be drawn on the next page.</p><p>In the simple example below we create a grid with some content for the first page. The next pages we export (File &gt; Export as Image &gt; Number of Pages) will start from the remainder of text for which no room was left on the previous page.</p><pre class="python"><span style="color: #530035;">grid</span> =  <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;grid&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">size</span><span style="">&#40;</span><span style="">400</span>, <span style="">400</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">if</span> PAGENUM == <span style="">1</span>:
    g = <span style="color: #530035;">grid</span>.<span style="">create</span><span style="">&#40;</span><span style="">1</span>, <span style="">2</span>, WIDTH<span style="">-40</span>, HEIGHT<span style="">-40</span><span style="">&#41;</span>
    g.<span style="">styles</span>.<span style="color: #530035;">background</span> = <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.5</span>, <span style="">0.65</span>, <span style="">0.8</span>, <span style="">0.25</span><span style="">&#41;</span>
    g.<span style="">styles</span>.<span style="color: #530035;">fill</span> = <span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0.3</span><span style="">&#41;</span>
    g.<span style="">styles</span>.<span style="">padding</span> = <span style="">10</span>
    g.<span style="">styles</span>.<span style="">margin</span> = <span style="">2</span>
    g.<span style="">content</span> = <span style="color: #530035;">grid</span>.<span style="color: #530035;">text</span>.<span style="">placeholder</span>.<span style="">english</span><span style="">&#40;</span><span style="">&#41;</span>
<span style="color: #530035;">else</span>:
    g = <span style="color: #530035;">grid</span>.<span style="">load</span><span style="">&#40;</span><span style="">&#41;</span>
    g.<span style="">split</span><span style="">&#40;</span><span style="">1</span>, <span style="color: #530035;">random</span><span style="">&#40;</span><span style="">1</span>,<span style="">3</span><span style="">&#41;</span><span style="">&#41;</span>
&nbsp;
g.<span style="">draw</span><span style="">&#40;</span><span style="">20</span>, <span style="">20</span><span style="">&#41;</span>
<span style="color: #530035;">grid</span>.<span style="">save</span><span style="">&#40;</span>g<span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;   <? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: Dec 05 2008 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>